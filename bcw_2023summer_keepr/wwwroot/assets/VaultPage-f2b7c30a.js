import{_ as b,u as w,D as V,j as I,k,w as S,c as p,s as m,M as A,P as r,l as d,y as g,o as n,b as i,d as e,C as f,x as u,i as D,g as x,F as B,q as C,A as v,p as K,h as N}from"./index-a1a24051.js";const M={setup(){const s=w(),c=V();async function _(){try{await g.getVaultById(s.params.vaultId),await m.getKeepsByVaultId(s.params.vaultId)}catch(a){if(a.response.data.includes("No vault found")){r.error("Sorry! That vault does not exist."),c.push({name:"Home"});return}r.error(a.message),d.error(a)}}function t(){try{g.clearActiveVault(),m.clearAllKeeps()}catch(a){r.error(a.message),d.error(a)}}return I(()=>_()),k(()=>t()),S(()=>{Number.isInteger(parseInt(s.params.vaultId))&&(t(),_())}),{account:p(()=>v.account),activeVault:p(()=>v.activeVault),keeps:p(()=>v.keeps),async getActiveKeep(a,y){try{await m.getActiveKeep(a,y),A.getOrCreateInstance("#keepDetailsModal").show()}catch(l){r.error(l.message),d.error(l)}},async deleteVault(){try{await r.confirm("Are you sure you want to delete this vault?","","Yes, delete this vault.","warning")&&(await g.deleteVault(),c.push({name:"Home"}))}catch(a){r.error(a.message),d.error(a)}}}}},h=s=>(K("data-v-95a54087"),s=s(),N(),s),P={class:"container-fluid"},T={key:0,class:"row"},j={class:"col-md-5 col-12 mx-auto py-3"},z={class:"text-center"},E={class:"mb-0 fs-3"},F={class:"d-flex justify-content-center"},H=h(()=>e("div",{class:"inner-flexbox"},null,-1)),R={class:"inner-flexbox"},q={class:"oxygen fw-bold keep-count"},L={class:"inner-flexbox justify-content-end"},O={key:0,class:"dropdown pe-2"},U=h(()=>e("i",{class:"mdi mdi-dots-horizontal fs-2",title:"Click to expand options",type:"button","data-bs-toggle":"dropdown"},null,-1)),Y={class:"dropdown-menu","aria-labelledby":"triggerId"},G=h(()=>e("i",{class:"mdi mdi-trash-can fs-5 me-1"},null,-1)),J={class:"col-md-8 col-12 mx-auto"},Q={class:"row"},W=["onClick"],X={class:"mb-0"};function Z(s,c,_,t,a,y){var l;return n(),i("div",P,[t.activeVault.id?(n(),i("section",T,[e("div",j,[e("div",{class:"header-image",style:f({backgroundImage:`linear-gradient(0deg, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0) 50%), url(${t.activeVault.img})`})},[e("div",z,[e("p",E,u(t.activeVault.name),1),e("p",null,"By "+u(t.activeVault.creator.name),1)])],4),e("div",F,[H,e("div",R,[e("p",q,u(t.keeps.length)+" Keeps",1)]),e("div",L,[((l=t.account)==null?void 0:l.id)===t.activeVault.creatorId?(n(),i("div",O,[U,e("div",Y,[e("p",{onClick:c[0]||(c[0]=(...o)=>t.deleteVault&&t.deleteVault(...o)),role:"button",title:"Delete this vault",class:"dropdown-item d-flex align-items-center mb-0 oxygen fw-bold",href:"#"},[G,D(" Delete Vault ")])])])):x("",!0)])])]),e("div",J,[e("section",Q,[(n(!0),i(B,null,C(t.keeps,o=>(n(),i("div",{key:o.id,class:"col-md-3 col-6 px-0 my-2"},[e("div",{role:"button",onClick:$=>t.getActiveKeep(o.id,o.vaultKeepId),class:"card-style mx-2",style:f({backgroundImage:`linear-gradient(0deg, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0) 50%), url(${o.img})`})},[e("p",X,u(o.name),1)],12,W)]))),128))])])])):x("",!0)])}const te=b(M,[["render",Z],["__scopeId","data-v-95a54087"]]);export{te as default};
